!function(e,t){"use strict";function n(t){return e.mk("div").attr("id",t)}var i={fail:"red",success:"green",wait:"blue",request:"",confirm:"orange",info:"darkblue"},o={fail:"fail",success:"success",wait:"info",request:"warn",confirm:"caution",info:"info"},a={fail:"Hiba",success:"Siker",wait:"Kommunikáció a szerverrel",request:"Információkérés",confirm:"Megerősítés",info:"Tájékoztatás"},s={fail:"Hiba történt a kérés feldolgozása közben.",success:"Akármit is csináltál, sikerült.",request:"A kéréshez nem tartozott adat.",confirm:"Biztosan ezt szeretnéd?",info:"Nincs megadva üzenet."},l=e("#dialogOverlay"),f=e("#dialogContent"),r=e("#dialogHeader"),c=e("#dialogBox"),d=e("#dialogWrap"),u=e("#dialogButtons");e.Dialog=function(){function p(){if(!("undefined"!=typeof K&&K instanceof jQuery)){var n=e(":focus");K=n.length>0?n.last():t}}function y(){"undefined"!=typeof K&&K instanceof jQuery&&(K.focus(),K=t)}function g(){var t=e("#dialogContent").find("input,select,textarea").filter(":visible"),n=e("#dialogButtons").children();t.length>0?t.first().focus():n.length>0&&n.first().focus()}function m(e){var t=f.children(":not(#dialogButtons)").last().add(u).find("input, button, select, textarea");e===B?t.filter(":not(:disabled)").addClass("temp-disable").attr("disabled",B):t.filter(".temp-disable").removeClass("temp-disable").attr("disabled",T)}function b(y,b,v,k,C){if("string"!=typeof y||"undefined"==typeof i[y])throw new TypeError("Invalid dialog type: "+typeof y);"undefined"!=typeof w&&(clearTimeout(w),w=t),"function"==typeof k&&"function"!=typeof C&&(C=k,k=t);var K=!1;"boolean"==typeof C?(K=C,C=t):"boolean"==typeof k&&"undefined"==typeof C&&(K=k,k=t),"undefined"==typeof b?b=a[y]:b===!1&&(b=t),v||(v=s[y]);var x,z={type:y,title:b,content:v||s[y],buttons:k,color:i[y]},q=Boolean(h),D=n().append(z.content),O=q&&"request"===h.type&&["fail","wait"].includes(z.type);if(z.color.length&&D.addClass(z.color),q)if(l=e("#dialogOverlay").css("opacity",1),c=e("#dialogBox").css({top:0,opacity:1}),r=e("#dialogHeader"),"string"==typeof z.title&&r.text(z.title),f=e("#dialogContent"),O&&!K){x=f.children(":not(#dialogButtons)").last();var j=x.children(".notice");j.length||(j=e.mk("div").append(e.mk("p")),x.append(j)),j.attr("class","notice "+o[z.type]).children("p").html(z.content),m("wait"===z.type?B:T)}else h=z,u=e("#dialogButtons").empty(),m(B),f.append(D),z.buttons&&(0===u.length&&(u=n("dialogButtons")),u.appendTo(f));else p(),h=z,l=n("dialogOverlay").css("opacity",0),r=n("dialogHeader").text(z.title||a[y]),f=n("dialogContent"),c=n("dialogBox").css({top:$w.height()*-.1,opacity:0}),d=n("dialogWrap"),f.append(D),u=n("dialogButtons").appendTo(f),c.append(r).append(f),l.append(d.append(c)).appendTo($body),setTimeout(function(){l.add(c).css("opacity",1).addClass("animating"),setTimeout(function(){l.removeClass("animating")},300),c.css("top",0)},10),$body.addClass("dialog-open");O||r.attr("class",z.color+"-bg"),!O&&z.buttons&&e.each(z.buttons,function(t,n){var i=e.mk("input").attr({type:"button","class":z.color+"-bg"});"function"==typeof n?n={action:n}:n.form&&(x=e("#"+n.form),1===x.length&&(i.on("click",function(){x.find("input[type=submit]").trigger("click")}),x.prepend(e.mk("input").attr("type","submit").hide()))),i.val(t).on("keydown",function(t){if(-1!==[Key.Enter,Key.Space].indexOf(t.keyCode))t.preventDefault(),i.trigger("click");else if([Key.Tab,Key.LeftArrow,Key.RightArrow].includes(t.keyCode)){t.preventDefault();var n=u.children(),o=n.filter(":focus"),a=f.find(":input");e.isKey(Key.LeftArrow,t)&&(t.shiftKey=!0),o.length?t.shiftKey?o.prev().length?o.prev().focus():e.isKey(Key.Tab,t)&&(a.length>0?a:n).filter(":visible").last().focus():o.next().length?o.next().focus():e.isKey(Key.Tab,t)&&a.add(n).filter(":visible").first().focus():a.add(n)[t.shiftKey?"last":"first"]().focus()}}).on("click",function(t){t.preventDefault(),e.callCallback(n.action,[t])}),u.append(i)}),g(),e.callCallback(C,[x])}function v(n){return k.isOpen()?(l.add(c).css("opacity",0).addClass("animating"),setTimeout(function(){l.removeClass("animating")},300),c.css("top",.1*$w.height()),void(w=setTimeout(function(){h=t,l.remove(),y(),e.callCallback(n),$body.removeClass("dialog-open"),w=t},300))):e.callCallback(n,!1)}var h=f.length?{}:t,k={isOpen:function(){return"object"==typeof h}},C={"Bezárás":function(){v()}};k.fail=function(e,t,n){b("fail",e,t,C,Boolean(n))},k.success=function(e,n,i,o){b("success",e,n,i===!0?C:t,o)},k.wait=function(n,i,o){"boolean"==typeof i&&"undefined"==typeof o&&(o=i,i=t),"string"!=typeof i&&(i="Kérés küldése"),b("wait",n,e.capitalize(i)+"&hellip;",o)},k.request=function(e,n,i,o,a){"function"==typeof o&&"undefined"==typeof a&&(a=o,o=t);var s={};i&&(s[o||"Submit"]={submit:!0,form:i}),s["Mégse"]=function(){v()},b("request",e,n,s,a)},k.confirm=function(t,n,i,o){"function"==typeof i&&"undefined"==typeof o&&(o=i),"function"!=typeof o&&(o=function(){v()}),e.isArray(i)||(i=["Igen","Nem"]);var a={};a[i[0]]=function(){o(!0)},a[i[1]]=function(){o(!1),v.call()},b("confirm",t,n,a)},k.info=function(e,t,n){b("info",e,t,C,n)};var K;k.setFocusedElement=function(e){e instanceof jQuery&&(K=e)};var w,B=!0,T=!1;return k.close=function(){v.apply(k,arguments)},k}(),$body.on("keydown",function(t){if(!e.Dialog.isOpen()||t.keyCode!==Key.Tab)return!0;var n=f.find(":input"),i=n.filter(t.target),o=n.index(i);if(0===i.length)t.preventDefault(),n.first().focus();else if(t.shiftKey)if(0===o)t.preventDefault(),u.find(":last").focus();else{var a=i.parent();if(!a.is(u))return!0;a.children().first().is(i)&&(t.preventDefault(),n.eq(n.index(i)-1).focus())}})}(jQuery);
//# sourceMappingURL=dialog.min.js.map
