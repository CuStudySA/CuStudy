!function(e,t){function n(t){return e.mk("div").attr("id",t)}var i={fail:"red",success:"green",wait:"blue",request:"yellow",confirm:"orange",info:"darkblue"},o={fail:"fail",success:"success",wait:"info",request:"warn",confirm:"caution",info:"info"},a={fail:"Hiba",success:"Siker",wait:"Kommunikáció a szerverrel",request:"Információkérés",confirm:"Megerősítés",info:"Tájékoztatás"},f={fail:"Hiba történt a kérés feldolgozása közben.",success:"Akármit is csináltál, sikerült.",request:"A kéréshez nem tartozott adat.",confirm:"Biztosan ezt szeretnéd?",info:"Nincs megadva üzenet."},r=e("#dialogOverlay"),l=e("#dialogContent"),s=e("#dialogHeader"),c=e("#dialogBox"),u=e("#dialogButtons");e.Dialog=function(){function d(){if(!("undefined"!=typeof b&&b instanceof jQuery)){var n=e(":focus");b=n.length>0?n.last():t}}function p(){"undefined"!=typeof b&&b instanceof jQuery&&b.focus()}function h(){var t=e("#dialogContent").find("input,select,textarea").filter(":visible"),n=e("#dialogButtons").children();t.length>0?t.first().focus():n.length>0&&n.first().focus()}function y(e){l.children(":not(:last-child)").find("input, select, textarea").attr("disabled",e)}function g(p,g,m,b,K){if("string"!=typeof p||"undefined"==typeof i[p])throw new TypeError("Invalid dialog type: "+typeof p);"function"==typeof b&&"undefined"==typeof K&&(K=b),"undefined"==typeof g?g=a[p]:g===!1&&(g=t),"undefined"==typeof m&&(m=f[p]);var z,B={type:p,title:g,content:m||f[p],buttons:b,color:i[p]},C=Boolean(v),q=n().addClass(B.color).append(B.content),D=C&&"request"===v.type&&["fail","wait"].includes(B.type);if(C)if(r=e("#dialogOverlay"),c=e("#dialogBox"),s=e("#dialogHeader"),"string"==typeof B.title&&s.text(B.title),l=e("#dialogContent"),D){z=l.children(":not(#dialogButtons)").last();var H=z.children(".notice");H.length||(H=e.mk("div").append(e.mk("p")),z.append(H)),H.attr("class","notice "+o[B.type]).children("p").html(B.content),y("wait"===B.type?k:x)}else v=B,u=e("#dialogButtons").empty(),y(k),l.append(q),B.buttons&&(0===u.length&&(u=n("dialogButtons")),u.appendTo(l));else{d(),v=B,r=n("dialogOverlay"),s=n("dialogHeader").text(B.title||a[p]),l=n("dialogContent"),c=n("dialogBox"),l.append(q),u=n("dialogButtons").appendTo(l),c.append(s).append(l),r.append(c).appendTo($body),$body.addClass("dialog-open");var M={w:r.width(),h:r.height()},T={w:c.outerWidth(!0),h:c.outerHeight(!0)};c.css({top:Math.max((M.h-T.h)/2*.5,0),left:Math.max((M.w-T.w)/2,0)})}D||s.attr("class",B.color+"-bg"),!D&&B.buttons&&e.each(B.buttons,function(t,n){var i=e.mk("input").attr({type:"button","class":B.color+"-bg"});"function"==typeof n?n={action:n}:n.form&&(z=e("#"+n.form),1==z.length&&(i.on("click",function(){z.find("input[type=submit]").trigger("click")}),z.prepend(e.mk("input").attr("type","submit").hide()))),i.val(t).on("keydown",function(t){if(-1!==[Key.Enter,Key.Space].indexOf(t.keyCode))t.preventDefault(),i.trigger("click");else if([Key.Tab,Key.LeftArrow,Key.RightArrow].includes(t.keyCode)){t.preventDefault();var n=u.children(),o=n.filter(":focus"),a=l.find(":input");e.isKey(Key.LeftArrow,t)&&(t.shiftKey=!0),o.length?t.shiftKey?o.prev().length?o.prev().focus():e.isKey(Key.Tab,t)&&(a.length>0?a:n).filter(":visible").last().focus():o.next().length?o.next().focus():e.isKey(Key.Tab,t)&&a.add(n).filter(":visible").first().focus():a.add(n)[t.shiftKey?"last":"first"]().focus()}}).on("click",function(t){t.preventDefault(),e.callCallback(n.action,[t])}),u.append(i)}),w.center(!0,C),h(),e.callCallback(K,[z])}function m(n){if(!w.isOpen())return e.callCallback(n,!1);var i={w:r.width(),h:r.height()},o={w:c.outerWidth(!0),h:c.outerHeight(!0)};c.css("left",Math.max((i.w-o.w)/2,0)).animate({top:Math.max((i.h-o.h)/2*1.2,0)},500,function(){r.remove(),v=t,p(),e.callCallback(n),$body.removeClass("dialog-open")}),r.css("opacity",0)}var v=l.length,w={isOpen:function(){return Boolean(v)}};w.fail=function(e,t,n){g("fail",e,t,{"Bezárás":function(){m()}},n)},w.success=function(e,n,i,o){g("success",e,n,i===!0?{"Bezárás":function(){m()}}:t,o)},w.wait=function(t,n,i){"function"==typeof n&&"undefined"===i&&(i=n),("string"!=typeof n||n.length<2)&&(n="Sending request");var o=e.capitalize(n)+"&hellip;";g("wait",t,o,i)},w.request=function(e,n,i,o,a){"function"==typeof o&&"undefined"==typeof a&&(a=o,o=t);var f={};i&&(f[o||"Submit"]={submit:!0,form:i}),f["Mégse"]=function(){m()},g("request",e,n,f,a)},w.confirm=function(t,n,i,o){"function"==typeof i&&"undefined"==typeof o&&(o=i),"function"!=typeof o&&(o=function(){m()}),e.isArray(i)||(i=["Igen","Nem"]);var a={};a[i[0]]=function(){o(!0)},a[i[1]]=function(){o(!1),m.call()},g("confirm",t,n,a)},w.info=function(e,t,n){g("info",e,t,{"Bezárás":function(){m()}},n)};var b;w.setFocusedElement=function(e){e instanceof jQuery&&(b=e)};var k=!0,x=!1;return w.close=function(){m.apply(w,arguments)},w.center=function(e,t){if("undefined"!=typeof v){var n={w:r.width(),h:r.height()},i={w:c.outerWidth(!0),h:c.outerHeight(!0)};e===!0?(t!==!0&&c.css({left:(n.w-i.w)/2,top:n.h/2-i.h}),c.stop().animate({top:(n.h-i.h)/2,left:(n.w-i.w)/2},350,h)):c.css({top:Math.max((n.h-i.h)/2,0),left:Math.max((n.w-i.w)/2,0)}),r.css("opacity",1)}},w}(),$w.on("resize",e.Dialog.center),$body.on("keydown",function(t){if(9===t.keyCode&&e.Dialog.isOpen()){var n=l.find(":input"),i=n.index(t.target);return t.shiftKey&&0===i?(t.preventDefault(),u.find(":last").focus()):1!==n.filter(":focus").length&&(t.preventDefault(),n.first().focus()),!0}})}(jQuery);
//# sourceMappingURL=dialog.min.js.map
