$("#dataform").on("submit",function(a){a.preventDefault();var t="Felhasználói adataim módosítása";$.Dialog.wait(t),$.ajax({method:"POST",url:"/profile/edit",data:$(this).serializeForm(),success:function(a){return"string"==typeof a?(console.log(a),$(window).trigger("ajaxerror"),!1):void(a.status?($.Dialog.success(t,a.message,!0),$(".name").text($("[name=name]").val()),$(".email").text($("[name=email]").val())):$.Dialog.fail(t,a.message))}}),$("[name=oldpassword], [name=password], [name=verpasswd]").val("")});var $connSel=$("#connect_s"),$connBtn=$("#connect");$connBtn.on("click",function(a){a.preventDefault();var t="Fiókok összekapcsolása",e=$connSel.val();return e?void $.Dialog.confirm(t,"A fiókjának összekapcsolásához át kell irányítanunk Önt a szolgáltatójának weboldalára.<br>A sikeres azonosítás után a rendszer visszairányítja. Folytatja?",["Tovább a szolgáltatóhoz","Visszalépés"],function(a){a&&($.Dialog.wait(t,"Átirányítjuk..."),window.location.href="/profile/connect/"+e)}):$.Dialog.fail("Fiókok összekapcsolása","Fiókjának összekapcsolásához először válasszon ki egy szolgáltatót!")}),$(".disconnect").on("click",function(a){a.preventDefault();var t="Fiókok leválasztása",e=$(this).closest(".conn-wrap"),o=e.find(".logo"),s=o.attr("title"),l=e.attr("data-prov");$.Dialog.confirm(t,"A kiválasztott szolgáltatóhoz kapcsolódó fiókot leválasztja a CuStudy fiókjáról, így az nem lesz látható a listában és nem lehet bejelentkezéshez használni. A művelet nem visszavonható! Folytatja?",["Leválasztás","Mégse"],function(a){a&&($.Dialog.wait(t),$.ajax({method:"POST",url:"/profile/unlink",data:pushToken({id:e.attr("data-id")}),success:function(a){return"string"==typeof a?(console.log(a),$(window).trigger("ajaxerror"),!1):a.status?($.Dialog.close(),e.remove(),$connSel.append($.mk("option").attr("value",l).text(s)).closest(".conn-wrap").show(),void $connBtn.attr("disabled",!1)):$.Dialog.fail(t,a.message)}}))})}),$(".activeToggle").on("click",function(a){a.preventDefault();var t=(-1!==this.className.indexOf("typcn-tick")?"":"de")+"activate",e=$.capitalize(t.replace(/ate$/,"").replace("c","k")+"álás"),o="Fiókkapcsolat "+e.toLowerCase()+"a",s="deactivate"===t?"A kiválaszott szolgáltatóval annak újra aktiválásáig nem tud majd bejelentkezni. Folytatja?":"A kiválaszott szolgáltató aktiválásával újra be tud majd jelentkezni vele. Folytatja?",l=$(this),n=$(this).closest(".conn-wrap");$.Dialog.confirm(o,s,[e,"Mégse"],function(a){a&&($.Dialog.wait(o),$.ajax({method:"POST",url:"/profile/"+t,data:pushToken({id:n.attr("data-id")}),success:function(a){return"string"==typeof a?(console.log(a),$(window).trigger("ajaxerror"),!1):a.status?($.Dialog.close(),l.toggleClass("typcn-power typcn-tick").toggleHtml(["Aktiválás","Deaktiválás"]),void l.parent().prev().toggleHtml(["Összekapcsolás aktív","Összekapcsolás inaktív"])):$.Dialog.fail(o,a.message)}}))})});
//# sourceMappingURL=profile.min.js.map
