$(function(){function e(e){var t="Not found",n=[];return location.search.substr(1).split("&").forEach(function(r){n=r.split("="),n[0]===e&&(t=decodeURIComponent(n[1]))}),t}function t(e){return e.charAt(0).toUpperCase()+e.substring(1)}var n=e("errtype");if("Not found"!=n){var r="",i=e("err"),a=e("prov");"Not found"==i&&(i="a távoli szolgáltatónál ismeretlen hiba történt"),r="Not found"==a||""==a?"távoli":t(a),$.Dialog.fail("Sikertelen bejelentkezés távoli szolgáltató segítségével","Nem sikerült bejelentkezni a(z) "+r+" szolgáltató segítségével, mert "+i+"!")}var o=$("[tabindex]");o.sort(function(e,t){return e.tabIndex-t.tabIndex}).last().on("keydown",function(e){9===e.keyCode&&(e.preventDefault(),o.first().focus())});var s=$("#inner"),l=$("#loginform");try{var c=localStorage.getItem("username"),u=l.find("input[name=username]");c?(u.val(c),l.find("input[name=password]").focus()):u.focus()}catch(f){}l.on("submit",function(e){e.preventDefault(),s.width(s.width()+1).height(s.height()+1).addClass("animate"),$("#links").detach();var t=$(this),n="Bejelentkezés",r=-1!==navigator.userAgent.toLowerCase().indexOf("trident")||-1!==navigator.userAgent.toLowerCase().indexOf("msie"),i=t.serializeForm();$.ajax({method:"POST",data:i,success:function(e){if("string"==typeof e)return console.log(e),$(window).trigger("ajaxerror"),!1;if(e.status){if($("[name=remember]").prop("checked"))try{localStorage.setItem("username",i.username)}catch(t){}if(r)return window.location.reload();$.get("?no-header-js",function(e){setTimeout(function(){function t(){i.filter("#sidebar").prependTo(s),s.addClass("sidebar-slide"),$("title").text(i.filter("title").text()),$("main").prepend(i.filter("main").html()),$("#main").fadeOut(500,function(){$(this).remove()}),r(0)}function r(e){"undefined"!=typeof c.js[e]&&$.ajax({url:c.js[e],dataType:"script",success:function(){r(e+1)},error:function(){throw new Error("JS #"+e+" - "+c.js[e])}})}var i=$(e),a=i.filter("script[src]"),o=i.filter("link[rel=stylesheet]"),s=$(document.body),l=$(document.head),c={css:[],js:[]};return 0!=i.find("#loginform").length?($.Dialog.fail(n,"Egy hiba miatt a bejelentkezés nem sikerült! Az oldal frissül, várjon...",void 0,!1),setTimeout(function(){window.location.reload()},3e3)):(o.each(function(){var e=document.createElement("a");e.href=this.href,0===l.children('style[data-href="'+e.pathname+'"]').length&&c.css.push(e.pathname)}),a.each(function(){var e=document.createElement("a");e.href=this.src,0===s.children('script[src="'+e.pathname+'"]').length&&c.js.push(e.pathname)}),void function u(e){return"undefined"==typeof c.css[e]?t():void $.ajax({url:c.css[e],success:function(t){return"string"!=typeof t?window.location.reload():(l.append($(document.createElement("style")).text(t)),void u(e+1))},error:function(){throw new Error("CSS #"+e+" - "+c.css[e])}})}(0))},500)})}else $.Dialog.fail(n,e.message),$("#inner").removeClass("animate")}})}),$("#pw-forgot").on("click",function(e){e.preventDefault();var t="Jelszóvisszaállítás";$.Dialog.request(t,"<form id='pw-reset'><p><p>Kérjük adja meg e-mail címét, és küldünk önnek egy<br>linket, melyre kattintva vissza tudja állítani jelszavát.</p><input type='email' name='email' placeholder='E-mail cím' required></label></form>","pw-reset",function(){$("#pw-reset").on("submit",function(e){e.preventDefault(),$.Dialog.wait(t,"Üzenet küldése"),$.post("/pw-reset/send",$(this).serializeForm(),function(e){return"object"!=typeof e?(console.log(e),$(window).trigger("ajaxerror"),!1):void $.Dialog[e.status?"success":"fail"](t,e.message,!0)})})})})});
//# sourceMappingURL=login.min.js.map
