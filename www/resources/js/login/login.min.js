$(function(){function e(e){var t="Not found",n=[];return location.search.substr(1).split("&").forEach(function(r){n=r.split("="),n[0]===e&&(t=decodeURIComponent(n[1]))}),t}function t(e){return decodeURIComponent((e+"").replace(/\+/g,"%20"))}var n=t(e("error"));"Not found"!=n&&$.Dialog.fail("Bejelentkezés távoli szolgáltatóval",n);var a=$("[tabindex]");a.sort(function(e,t){return e.tabIndex-t.tabIndex}).last().on("keydown",function(e){9===e.keyCode&&(e.preventDefault(),a.first().focus())});var o=$("#inner"),i=$("#loginform");try{var s=localStorage.getItem("username"),c=i.find("input[name=username]");s?(c.val(s),i.find("input[name=password]").focus()):c.focus()}catch(l){}i.on("submit",function(e){e.preventDefault(),o.width(o.width()+1).height(o.height()+1).addClass("animate");var t=$("#links"),n=t.parent();t.detach();var a=$(this),i="Bejelentkezés",s=-1!==navigator.userAgent.toLowerCase().indexOf("trident")||-1!==navigator.userAgent.toLowerCase().indexOf("msie"),c=a.serializeForm();$.ajax({method:"POST",data:c,success:function(e){if("string"==typeof e)return console.log(e),$(window).trigger("ajaxerror"),!1;if(e.status){if($("[name=remember]").prop("checked"))try{localStorage.setItem("username",c.username)}catch(a){}if(s)return c.r?window.location.href=r:window.location.reload();$.ajax({url:(c.r||"")+"?via-js",dataType:"json",success:function(e){function t(){a.prepend(e.sidebar),a.addClass("sidebar-slide"),$("title").text(e.title),c.r&&history.replaceState({},"",c.r),$("main").children(":not(#main)").remove().end().prepend(e.main),$("link[href*=amber]").remove();var t=$("#main").addClass("loaded");setTimeout(function(){t.remove()},400),n(0)}function n(e){"undefined"!=typeof i.js[e]&&$.ajax({url:i.js[e],dataType:"script",success:function(){n(e+1)},error:function(){throw new Error("JS #"+e+" - "+i.js[e])}})}var a=$(document.body),o=$(document.head),i={css:[],js:[]};$.each(e.css,function(e,t){var n=document.createElement("a");n.href=t,0===o.children('style[data-href="'+n.pathname+'"]').length&&i.css.push(n.pathname)}),$.each(e.js,function(e,t){var n=document.createElement("a");n.href=t,0===a.children('script[src="'+n.pathname+'"]').length&&i.js.push(n.pathname)}),function s(e){return"undefined"==typeof i.css[e]?t():void $.ajax({url:i.css[e],success:function(t){return"string"!=typeof t?c.r?window.location.href=r:window.location.reload():(t=t.replace(/url\((['"])?\.\.\//g,"url($1/resources/"),o.append($(document.createElement("style")).text(t)),void s(e+1))},error:function(){throw new Error("CSS #"+e+" - "+i.css[e])}})}(0)}})}else $.Dialog.fail(i,e.message),$("#inner").removeClass("animate"),t.appendTo(n)}})}),$("#pw-forgot").on("click",function(e){e.preventDefault();var t="Jelszóvisszaállítás";$.Dialog.request(t,"<form id='pw-reset'><p><p>Kérjük adja meg e-mail címét, és küldünk önnek egy<br>linket, melyre kattintva vissza tudja állítani jelszavát.</p><input type='email' name='email' placeholder='E-mail cím' required></label></form>","pw-reset",function(){$("#pw-reset").on("submit",function(e){e.preventDefault(),$.Dialog.wait(t,"Üzenet küldése"),$.post("/pw-reset/send",$(this).serializeForm(),function(e){return"object"!=typeof e?(console.log(e),$(window).trigger("ajaxerror"),!1):void $.Dialog[e.status?"success":"fail"](t,e.message,!0)})})})})});
//# sourceMappingURL=login.min.js.map
