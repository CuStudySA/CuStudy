"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};$(function(){function e(e){if(d){try{console.log("Internet Explorer érzékelve, átirányítás...")}catch(t){}return e.r?window.location.href=e.r:window.location.reload()}$.ajax({url:(e.r||"")+"?via-js",dataType:"json",success:function(t){function a(){i.prepend(t.sidebar).addClass("sidebar-slide"),$("title").text(t.title),history.replaceState({},"",e.r?e.r:"/"),$("main").children(":not(#main)").remove(),$.mk("main").append(t.main).appendTo(i),n.addClass("loaded"),t.mobile_header?$(t.mobile_header).insertBefore("#sidebar"):$("#mobile-header").remove(),setTimeout(function(){i.children("div:not(#sidebar):not(#main):not(#mobile-header):not(#heading), #underDevelopment").remove(),n.remove()},410),setTimeout(function(){$('link[href*="login.css"], #heading').remove(),i.removeClass("sidebar-slide")},2e3),o(0)}function o(e){"undefined"!=typeof l.js[e]&&$.ajax({url:l.js[e],dataType:"script",success:function(){o(e+1)},error:function(){throw new Error("JS #"+e+" - "+l.js[e])}})}var i=$(document.body),s=$(document.head),l={css:[],js:[]};$.each(t.css,function(e,t){var a=document.createElement("a");a.href=t,0===s.children('style[data-href="'+a.pathname+'"]').length&&l.css.push(a.pathname)}),$.each(t.js,function(e,t){var a=document.createElement("a");a.href=t,0===i.children('script[src="'+a.pathname+'"]').length&&l.js.push(a.pathname)}),function d(t){return"undefined"==typeof l.css[t]?a():void $.ajax({url:l.css[t],dataType:"text",success:function(a){return"string"!=typeof a?e.r?window.location.href=r:window.location.reload():(a=a.replace(/url\((['"])?\.\.\/\.\.\//g,"url($1/resources/"),s.append($.mk("style").text(a)),void d(t+1))},error:function(){throw new Error("CSS #"+t+" - "+l.css[t])}})}(0)}})}displayError("Bejelentkezés távoli szolgáltatóval");var t=$("[tabindex]");t.sort(function(e,t){return e.tabIndex-t.tabIndex}).last().on("keydown",function(e){9===e.keyCode&&(e.preventDefault(),t.first().focus())});var a=$("#inner"),n=$("#main"),o=$("#loginform");try{var i=localStorage.getItem("username"),s=o.find("input[name=username]");i?(s.val(i),o.find("input[name=password]").focus()):s.focus()}catch(l){}$("#heading").find(".help-link").on("click",function(){var e=$("#links").children().clone().addClass("btn");$.Dialog.info("Segítség",$.mk("div").addClass("align-center").append(e.eq(0)," ",e.eq(1)))});var d=navigator.userAgent.toLowerCase().indexOf("trident")!==-1||navigator.userAgent.toLowerCase().indexOf("msie")!==-1;o.on("submit",function(t){t.preventDefault(),a.width(a.width()+1).height(a.height()+1).addClass("animate");var n=$("#links"),o=n.parent();n.detach();var r=$(this),i="Bejelentkezés",s=r.serializeForm();$.ajax({method:"POST",data:s,success:function(t){if("string"==typeof t)return console.log(t),$(window).trigger("ajaxerror"),!1;if(t.status){if($("[name=remember]").prop("checked"))try{localStorage.setItem("username",s.username)}catch(a){}e(s)}else if($("#inner").removeClass("animate"),n.appendTo(o),t.twofa){var r=$.mk("form").attr("id","twofa-login").append('<p>A fiókodban engedélyezve van a kétfaktoros azonosítás. Kérlek, add meg az alkalmazás által generált kódot (vagy egy tartalék kódot).</p>\n\t\t\t\t\t\t\t<label>\n\t\t\t\t\t\t\t\t<input type="text" name="code" minlength="6" maxlength="8" pattern="^(\\d{6}|['+t.twofa+']{8})$" title="6 számjegyú azonosító kód vagy 8 karakteres tartalék kód" required autocomplete="off">\n\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t<p>Ha nem tudsz többé hozzáférni a hordozható eszközhöz és kifogytál a tartalék kódokból, vedd fel a kapcsolatot az ügyfélszolgálattal.</p>');$.Dialog.request(i,r,"twofa-login","Elküldés",function(t){t.on("submit",function(a){a.preventDefault();var o=t.serializeForm();s.code=o.code,$.Dialog.wait(!1,"Komunikáció a szerverrel, kis türelmet"),$.ajax({method:"POST",data:s,success:function(a){return"string"==typeof a?(console.log(a),$(window).trigger("ajaxerror"),!1):a.status?($.Dialog.close(),$("#inner").addClass("animate"),n.detach(),void e(s)):(t.find("input").val(""),$.Dialog.fail(!1,a.message))}})})})}else $.Dialog.fail(i,t.message),$("input[name=password]").val("")}})}),$("#pw-forgot").on("click",function(e){e.preventDefault();var t="Jelszóvisszaállítás";$.Dialog.request(t,"<form id='pw-reset'><p><p>Kérjük adja meg e-mail címét, és küldünk önnek egy linket, melyre kattintva vissza tudja állítani jelszavát.</p><input type='email' name='email' placeholder='E-mail cím' required></label></form>","pw-reset",function(e){e.on("submit",function(a){a.preventDefault();var n=e.serializeForm();$.Dialog.wait(t,"Üzenet küldése"),$.post("/pw-reset/send",n,function(e){return"object"!==("undefined"==typeof e?"undefined":_typeof(e))?(console.log(e),$(window).trigger("ajaxerror"),!1):void $.Dialog[e.status?"success":"fail"](t,e.message,!0)})})})})});
//# sourceMappingURL=login.js.map
