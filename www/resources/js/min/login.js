"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};$(function(){displayError("Bejelentkezés távoli szolgáltatóval");var e=$("[tabindex]");e.sort(function(e,n){return e.tabIndex-n.tabIndex}).last().on("keydown",function(n){9===n.keyCode&&(n.preventDefault(),e.first().focus())});var n=$("#inner"),t=$("#main"),a=$("#loginform");try{var o=localStorage.getItem("username"),i=a.find("input[name=username]");o?(i.val(o),a.find("input[name=password]").focus()):i.focus()}catch(s){}$("#heading").find(".help-link").on("click",function(){var e=$("#links").children().clone().addClass("btn");$.Dialog.info("Segítség",$.mk("div").addClass("align-center").append(e.eq(0)," ",e.eq(1)))}),a.on("submit",function(e){e.preventDefault(),n.width(n.width()+1).height(n.height()+1).addClass("animate");var a=$("#links"),o=a.parent();a.detach();var i=$(this),s="Bejelentkezés",l=navigator.userAgent.toLowerCase().indexOf("trident")!==-1||navigator.userAgent.toLowerCase().indexOf("msie")!==-1,d=i.serializeForm();$.ajax({method:"POST",data:d,success:function(e){if("string"==typeof e)return console.log(e),$(window).trigger("ajaxerror"),!1;if(e.status){if($("[name=remember]").prop("checked"))try{localStorage.setItem("username",d.username)}catch(n){}if(l){try{console.log("Internet Explorer érzékelve, átirányítás...")}catch(i){}return d.r?window.location.href=d.r:window.location.reload()}$.ajax({url:(d.r||"")+"?via-js",dataType:"json",success:function(e){function n(){o.prepend(e.sidebar).addClass("sidebar-slide"),$("title").text(e.title),history.replaceState({},"",d.r?d.r:"/"),$("main").children(":not(#main)").remove(),$.mk("main").append(e.main).appendTo(o),t.addClass("loaded"),e.mobile_header?$(e.mobile_header).insertBefore("#sidebar"):$("#mobile-header").remove(),setTimeout(function(){o.children("div:not(#sidebar):not(#main):not(#mobile-header):not(#heading), #underDevelopment").remove(),t.remove()},410),setTimeout(function(){$('link[href*="login.css"], #heading').remove(),o.removeClass("sidebar-slide")},2e3),a(0)}function a(e){"undefined"!=typeof s.js[e]&&$.ajax({url:s.js[e],dataType:"script",success:function(){a(e+1)},error:function(){throw new Error("JS #"+e+" - "+s.js[e])}})}var o=$(document.body),i=$(document.head),s={css:[],js:[]};$.each(e.css,function(e,n){var t=document.createElement("a");t.href=n,0===i.children('style[data-href="'+t.pathname+'"]').length&&s.css.push(t.pathname)}),$.each(e.js,function(e,n){var t=document.createElement("a");t.href=n,0===o.children('script[src="'+t.pathname+'"]').length&&s.js.push(t.pathname)}),function l(e){return"undefined"==typeof s.css[e]?n():void $.ajax({url:s.css[e],dataType:"text",success:function(n){return"string"!=typeof n?d.r?window.location.href=r:window.location.reload():(n=n.replace(/url\((['"])?\.\.\/\.\.\//g,"url($1/resources/"),i.append($.mk("style").text(n)),void l(e+1))},error:function(){throw new Error("CSS #"+e+" - "+s.css[e])}})}(0)}})}else $.Dialog.fail(s,e.message),$("#inner").removeClass("animate"),$("input[name=password]").val(""),a.appendTo(o)}})}),$("#pw-forgot").on("click",function(e){e.preventDefault();var n="Jelszóvisszaállítás";$.Dialog.request(n,"<form id='pw-reset'><p><p>Kérjük adja meg e-mail címét, és küldünk önnek egy linket, melyre kattintva vissza tudja állítani jelszavát.</p><input type='email' name='email' placeholder='E-mail cím' required></label></form>","pw-reset",function(e){e.on("submit",function(t){t.preventDefault();var r=e.serializeForm();$.Dialog.wait(n,"Üzenet küldése"),$.post("/pw-reset/send",r,function(e){return"object"!==("undefined"==typeof e?"undefined":_typeof(e))?(console.log(e),$(window).trigger("ajaxerror"),!1):void $.Dialog[e.status?"success":"fail"](n,e.message,!0)})})})})});
//# sourceMappingURL=login.js.map
