"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};$(function(){function t(t){$.ajax({method:"POST",url:"/timetables/showTimetable/"+(t?"my":"all"),data:{dispDays:s},success:function(e){l=t?0:1,s=e.dispDays,t||r.removeClass("single"),r.html(e.timetable),c.attr("disabled",e.lockBack),y.attr("disabled",i=!1),n&&r.addClass("single"),f[t?"removeClass":"addClass"]("typcn-user")[t?"addClass":"removeClass"]("typcn-group").html(t?'Teljes<span class="desktop-only"> nézet</span>':'Saját<span class="desktop-only"> órarend</span>'),$.Dialog.close()}})}$("tr td").addClass("notAdmin");var e,a="Órarend léptetése",s="object"!==("undefined"==typeof _dispDays?"undefined":_typeof(_dispDays))?"":_dispDays,o=s,l=0,n=!1,i=!0,c=$(".backWeek"),d=$(".nextWeek"),r=$(".timet"),u=$("#startDatePicker"),p=u.val(),m=function(t){return"back"==t&&c.is(":disabled")?$.Dialog.fail(a,"A jelenlegi héttől nem lehetséges visszább léptetni!"):($.Dialog.wait(a),void $.ajax({method:"POST",url:"/homeworks/getTimetable/nextBack",data:{move:t,dispDays:s,showAllGroups:l},success:function(t){return t.status?(o=s,s=t.dispDays,r.html(t.timetable),c.attr("disabled",t.lockBack).blur(),u.val(new Date(s[0]).toISOString().substring(0,10)),d.blur(),void $.Dialog.close()):$.Dialog.fail(a,t.message)}}))};c.on("click",function(){m("back")}),d.on("click",function(){m("next")}),u.on("change",function(t){t.preventDefault();var n=$(this).val();return n===p||(isNaN(Date.parse(n))?$.Dialog.fail("Léptetés","Érvénytelen dátum!"):("undefined"!=typeof e&&(e.abort(),e=void 0),$.Dialog.open&&"wait"===$.Dialog.open.type||$.Dialog.wait(a),void(e=$.ajax({method:"POST",url:"/homeworks/getTimetable/date",data:{date:new Date($(this).val()).toISOString(),days:5,showAllGroups:l},success:function(t){o=s,s=t.dispDays,r.html(t.timetable),c.attr("disabled",t.lockBack),p=new Date(s[0]).toISOString().substring(0,10),u.val(p),$.Dialog.close(),e=void 0}}))))});var y=$("#js_switchView"),f=$(".js_fullPersonalToggle");f.on("click",function(e){e.preventDefault(),$.Dialog.wait(),t(this.className.indexOf("typcn-group")===-1)});var g=function(){n=!n,$(".timet")[(n?"add":"remove")+"Class"]("single"),y.toggleClass("typcn-eye typcn-eye-outline").html((n?"Hagyományos":"Kompakt")+'<span class="desktop-only"> nézet</span>')};y.on("click",g),"compact"==getUserSetting("timetable.defaultViewMode")&&g()});
//# sourceMappingURL=tt-view.js.map
