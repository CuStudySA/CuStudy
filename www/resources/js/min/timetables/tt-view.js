"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};$(function(){function e(e){$.ajax({method:"POST",url:"/timetables/showTimetable/"+(e?"my":"all"),data:{dispDays:s},success:function(t){l=e?0:1,s=t.dispDays,e||p.removeClass("single"),p.html(t.timetable),r.attr("disabled",t.lockBack),i.attr("disabled",c=!1),n&&p.addClass("single"),f[e?"removeClass":"addClass"]("typcn-user")[e?"addClass":"removeClass"]("typcn-group").html(e?'Teljes<span class="desktop-only"> nézet</span>':'Saját<span class="desktop-only"> órarend</span>'),$.Dialog.close()}})}$(".timet").addClass("notAdmin");var t,a="Órarend léptetése",s="object"!==("undefined"==typeof _dispDays?"undefined":_typeof(_dispDays))?"":_dispDays,o=s,l=0,i=$("#js_switchView"),n=i.hasClass("typcn-eye-outline"),c=!0,r=$(".backWeek"),d=$(".nextWeek"),p=$(".timet"),u=$("#startDatePicker"),m=u.val(),y=function(e){return"back"==e&&r.is(":disabled")?$.Dialog.fail(a,"A jelenlegi héttől nem lehetséges visszább léptetni!"):($.Dialog.wait(a),void $.ajax({method:"POST",url:"/homeworks/getTimetable/nextBack",data:{move:e,dispDays:s,showAllGroups:l},success:function(e){return e.status?(o=s,s=e.dispDays,p.html(e.timetable),r.attr("disabled",e.lockBack).blur(),u.val(new Date(s[0]).toISOString().substring(0,10)),d.blur(),void $.Dialog.close()):$.Dialog.fail(a,e.message)}}))};r.on("click",function(){y("back")}),d.on("click",function(){y("next")}),u.on("change",function(e){e.preventDefault();var i=$(this).val();return i===m||(isNaN(Date.parse(i))?$.Dialog.fail("Léptetés","Érvénytelen dátum!"):("undefined"!=typeof t&&(t.abort(),t=void 0),$.Dialog.open&&"wait"===$.Dialog.open.type||$.Dialog.wait(a),void(t=$.ajax({method:"POST",url:"/homeworks/getTimetable/date",data:{date:new Date($(this).val()).toISOString(),days:5,showAllGroups:l},success:function(e){o=s,s=e.dispDays,p.html(e.timetable),r.attr("disabled",e.lockBack),m=new Date(s[0]).toISOString().substring(0,10),u.val(m),$.Dialog.close(),t=void 0}}))))});var f=$(".js_fullPersonalToggle");f.on("click",function(t){t.preventDefault(),$.Dialog.wait(),e(this.className.indexOf("typcn-group")===-1)});var g=function(){n=!n,$(".timet")[(n?"add":"remove")+"Class"]("single"),i.toggleClass("typcn-eye typcn-eye-outline").html((n?"Hagyományos":"Kompakt")+'<span class="desktop-only"> nézet</span>'),$.post("/profile/settings",{"timetable.defaultViewMode":n?"compact":"original"})};i.on("click",g)});
//# sourceMappingURL=tt-view.js.map
