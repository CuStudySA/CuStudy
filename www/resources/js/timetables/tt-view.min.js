$(function(){$("tr td").addClass("notAdmin");var t="Órarend léptetése",e="object"!=typeof _dispDays?"":_dispDays,a=e,s=0,l=!1,i=!0,o=$(".backWeek"),n=$(".nextWeek"),c=$(".timet"),d=$("#startDatePicker"),r=function(l){return"back"==l&&o.is(":disabled")?$.Dialog.fail(t,"A jelenlegi héttől nem lehetséges visszább léptetni!"):($.Dialog.wait(t),void $.ajax({method:"POST",url:"/homeworks/getTimetable/nextBack",data:{move:l,dispDays:e,showAllGroups:s},success:function(s){return s.status?(a=e,e=s.dispDays,c.html(s.timetable),o.attr("disabled",s.lockBack).blur(),d.val(new Date(e[0]).toISOString().substring(0,10)),n.blur(),void $.Dialog.close()):$.Dialog.fail(t,s.message)}}))};o.on("click",function(){r("back")}),n.on("click",function(){r("next")}),d.on("keydown blur",function(l){if(("keydown"!==l.type||13!==l.keyCode)&&"blur"!==l.type)return!0;l.preventDefault(),$.Dialog.wait(t);var i=$(this).val();return isNaN(Date.parse(i))?$.Dialog.fail("Léptetés","Érvénytelen dátum!"):void $.ajax({method:"POST",url:"/homeworks/getTimetable/date",data:{date:new Date($(this).val()).toISOString(),days:5,showAllGroups:s},success:function(t){a=e,e=t.dispDays,c.html(t.timetable),o.attr("disabled",t.lockBack),d.val(new Date(e[0]).toISOString().substring(0,10)),$.Dialog.close()}})});var u=$("#js_switchView"),m=$(".js_fullPersonalToggle"),g=function(){$.ajax({method:"POST",url:"/timetables/showTimetable/all",data:{dispDays:e},success:function(t){s=1,e=t.dispDays,c.removeClass("single").html(t.timetable),o.attr("disabled",t.lockBack),u.attr("disabled",i=!0),m.removeClass("typcn-group").addClass("typcn-user").text("Saját órarend"),$.Dialog.close()}})},p=function(){$.ajax({method:"POST",url:"/timetables/showTimetable/my",data:{dispDays:e},success:function(t){s=0,e=t.dispDays,c.html(t.timetable),o.attr("disabled",t.lockBack),u.attr("disabled",i=!1),l&&c.addClass("single"),m.removeClass("typcn-user").addClass("typcn-group").text("Teljes nézet"),$.Dialog.close()}})};m.on("click",function(t){t.preventDefault(),$.Dialog.wait(),-1!==this.className.indexOf("typcn-group")?g():p()}),u.on("click",function(){l=!l,$(".timet")[(l?"add":"remove")+"Class"]("single"),u.toggleClass("typcn-eye typcn-eye-outline").text(l?"Hagyományos nézet":"Kompakt nézet")})});
//# sourceMappingURL=tt-view.min.js.map
