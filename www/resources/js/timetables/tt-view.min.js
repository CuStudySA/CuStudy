$(function(){$("tr td").addClass("notAdmin");var t="Órarend léptetése",e="object"!=typeof _dispDays?"":_dispDays,a=e,s=0,l=!1,i=!0,n=$(".backWeek"),o=$(".nextWeek"),c=$(".timet"),d=$("#startDatePicker"),r=d.val(),u=function(l){return"back"==l&&n.is(":disabled")?$.Dialog.fail(t,"A jelenlegi héttől nem lehetséges visszább léptetni!"):($.Dialog.wait(t),void $.ajax({method:"POST",url:"/homeworks/getTimetable/nextBack",data:{move:l,dispDays:e,showAllGroups:s},success:function(s){return s.status?(a=e,e=s.dispDays,c.html(s.timetable),n.attr("disabled",s.lockBack).blur(),d.val(new Date(e[0]).toISOString().substring(0,10)),o.blur(),void $.Dialog.close()):$.Dialog.fail(t,s.message)}}))};n.on("click",function(){u("back")}),o.on("click",function(){u("next")}),d.on("change",function(l){l.preventDefault();var i=$(this).val();return i===r?!0:($.Dialog.wait(t),isNaN(Date.parse(i))?$.Dialog.fail("Léptetés","Érvénytelen dátum!"):void $.ajax({method:"POST",url:"/homeworks/getTimetable/date",data:{date:new Date($(this).val()).toISOString(),days:5,showAllGroups:s},success:function(t){a=e,e=t.dispDays,c.html(t.timetable),n.attr("disabled",t.lockBack),r=new Date(e[0]).toISOString().substring(0,10),d.val(r),$.Dialog.close()}}))});var m=$("#js_switchView"),g=$(".js_fullPersonalToggle"),p=function(){$.ajax({method:"POST",url:"/timetables/showTimetable/all",data:{dispDays:e},success:function(t){s=1,e=t.dispDays,c.removeClass("single").html(t.timetable),n.attr("disabled",t.lockBack),m.attr("disabled",i=!0),g.removeClass("typcn-group").addClass("typcn-user").text("Saját órarend"),$.Dialog.close()}})},b=function(){$.ajax({method:"POST",url:"/timetables/showTimetable/my",data:{dispDays:e},success:function(t){s=0,e=t.dispDays,c.html(t.timetable),n.attr("disabled",t.lockBack),m.attr("disabled",i=!1),l&&c.addClass("single"),g.removeClass("typcn-user").addClass("typcn-group").text("Teljes nézet"),$.Dialog.close()}})};g.on("click",function(t){t.preventDefault(),$.Dialog.wait(),-1!==this.className.indexOf("typcn-group")?p():b()}),m.on("click",function(){l=!l,$(".timet")[(l?"add":"remove")+"Class"]("single"),m.toggleClass("typcn-eye typcn-eye-outline").text(l?"Hagyományos nézet":"Kompakt nézet")})});
//# sourceMappingURL=tt-view.min.js.map
