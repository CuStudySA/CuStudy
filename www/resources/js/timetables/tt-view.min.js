$(function(){$("tr td").addClass("notAdmin");var t,e="Órarend léptetése",a="object"!=typeof _dispDays?"":_dispDays,s=a,l=0,i=!1,o=!0,n=$(".backWeek"),c=$(".nextWeek"),d=$(".timet"),r=$("#startDatePicker"),u=r.val(),m=function(t){return"back"==t&&n.is(":disabled")?$.Dialog.fail(e,"A jelenlegi héttől nem lehetséges visszább léptetni!"):($.Dialog.wait(e),void $.ajax({method:"POST",url:"/homeworks/getTimetable/nextBack",data:{move:t,dispDays:a,showAllGroups:l},success:function(t){return t.status?(s=a,a=t.dispDays,d.html(t.timetable),n.attr("disabled",t.lockBack).blur(),r.val(new Date(a[0]).toISOString().substring(0,10)),c.blur(),void $.Dialog.close()):$.Dialog.fail(e,t.message)}}))};n.on("click",function(){m("back")}),c.on("click",function(){m("next")}),r.on("change",function(i){i.preventDefault();var o=$(this).val();return o===u?!0:isNaN(Date.parse(o))?$.Dialog.fail("Léptetés","Érvénytelen dátum!"):("undefined"!=typeof t&&(t.abort(),t=void 0),$.Dialog.open&&"wait"===$.Dialog.open.type||$.Dialog.wait(e),void(t=$.ajax({method:"POST",url:"/homeworks/getTimetable/date",data:{date:new Date($(this).val()).toISOString(),days:5,showAllGroups:l},success:function(e){s=a,a=e.dispDays,d.html(e.timetable),n.attr("disabled",e.lockBack),u=new Date(a[0]).toISOString().substring(0,10),r.val(u),$.Dialog.close(),t=void 0}})))});var g=$("#js_switchView"),p=$(".js_fullPersonalToggle"),b=function(){$.ajax({method:"POST",url:"/timetables/showTimetable/all",data:{dispDays:a},success:function(t){l=1,a=t.dispDays,d.removeClass("single").html(t.timetable),n.attr("disabled",t.lockBack),g.attr("disabled",o=!0),p.removeClass("typcn-group").addClass("typcn-user").text("Saját órarend"),$.Dialog.close()}})},D=function(){$.ajax({method:"POST",url:"/timetables/showTimetable/my",data:{dispDays:a},success:function(t){l=0,a=t.dispDays,d.html(t.timetable),n.attr("disabled",t.lockBack),g.attr("disabled",o=!1),i&&d.addClass("single"),p.removeClass("typcn-user").addClass("typcn-group").text("Teljes nézet"),$.Dialog.close()}})};p.on("click",function(t){t.preventDefault(),$.Dialog.wait(),-1!==this.className.indexOf("typcn-group")?b():D()}),g.on("click",function(){i=!i,$(".timet")[(i?"add":"remove")+"Class"]("single"),g.toggleClass("typcn-eye typcn-eye-outline").text(i?"Hagyományos nézet":"Kompakt nézet")})});
//# sourceMappingURL=tt-view.min.js.map
