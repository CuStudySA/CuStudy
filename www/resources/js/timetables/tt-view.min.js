"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};$(function(){$("tr td").addClass("notAdmin");var t,e="Órarend léptetése",a="object"!==("undefined"==typeof _dispDays?"undefined":_typeof(_dispDays))?"":_dispDays,s=a,i=0,o=!1,l=!0,n=$(".backWeek"),c=$(".nextWeek"),d=$(".timet"),r=$("#startDatePicker"),u=r.val(),m=function(t){return"back"==t&&n.is(":disabled")?$.Dialog.fail(e,"A jelenlegi héttől nem lehetséges visszább léptetni!"):($.Dialog.wait(e),void $.ajax({method:"POST",url:"/homeworks/getTimetable/nextBack",data:{move:t,dispDays:a,showAllGroups:i},success:function(t){return t.status?(s=a,a=t.dispDays,d.html(t.timetable),n.attr("disabled",t.lockBack).blur(),r.val(new Date(a[0]).toISOString().substring(0,10)),c.blur(),void $.Dialog.close()):$.Dialog.fail(e,t.message)}}))};n.on("click",function(){m("back")}),c.on("click",function(){m("next")}),r.on("change",function(o){o.preventDefault();var l=$(this).val();return l===u||(isNaN(Date.parse(l))?$.Dialog.fail("Léptetés","Érvénytelen dátum!"):("undefined"!=typeof t&&(t.abort(),t=void 0),$.Dialog.open&&"wait"===$.Dialog.open.type||$.Dialog.wait(e),void(t=$.ajax({method:"POST",url:"/homeworks/getTimetable/date",data:{date:new Date($(this).val()).toISOString(),days:5,showAllGroups:i},success:function(e){s=a,a=e.dispDays,d.html(e.timetable),n.attr("disabled",e.lockBack),u=new Date(a[0]).toISOString().substring(0,10),r.val(u),$.Dialog.close(),t=void 0}}))))});var p=$("#js_switchView"),y=$(".js_fullPersonalToggle"),f=function(){$.ajax({method:"POST",url:"/timetables/showTimetable/all",data:{dispDays:a},success:function(t){i=1,a=t.dispDays,d.removeClass("single").html(t.timetable),n.attr("disabled",t.lockBack),p.attr("disabled",l=!0),y.removeClass("typcn-group").addClass("typcn-user").text("Saját órarend"),$.Dialog.close()}})},g=function(){$.ajax({method:"POST",url:"/timetables/showTimetable/my",data:{dispDays:a},success:function(t){i=0,a=t.dispDays,d.html(t.timetable),n.attr("disabled",t.lockBack),p.attr("disabled",l=!1),o&&d.addClass("single"),y.removeClass("typcn-user").addClass("typcn-group").text("Teljes nézet"),$.Dialog.close()}})};y.on("click",function(t){t.preventDefault(),$.Dialog.wait(),this.className.indexOf("typcn-group")!==-1?f():g()});var b=function(){o=!o,$(".timet")[(o?"add":"remove")+"Class"]("single"),p.toggleClass("typcn-eye typcn-eye-outline").text(o?"Hagyományos nézet":"Kompakt nézet")};p.on("click",b),"compact"==getUserSetting("timetable.defaultViewMode")&&b()});
//# sourceMappingURL=tt-view.min.js.map
