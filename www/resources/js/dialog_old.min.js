!function(t,e){function o(t,e,o,n){return{color:t,draggable:"undefined"==typeof e?!1:e,overlay:"undefined"==typeof o?!0:o,closeButton:"undefined"==typeof n?!1:n}}function n(){return t(document.createElement("div"))}var i,a,f,s,r,c=t("html"),l={fail:o("lightRed"),success:o("darkGreen"),wait:o("lightBlue"),request:o("lightOrange",!0),confirm:o("darkOrange"),info:o("darkBlue")},d={fail:"Hiba",success:"Siker",wait:"Kommunikáció a szerverrel",request:"Információkérés",confirm:"Megerősítés",info:"Tájékoztatás"},u={fail:"Hiba történt a kérés feldolgozása közben.",success:"Akármit is csináltál, sikerült.",request:"A kéréshez nem tartozott adat.",confirm:"Biztosan ezt szeretnéd?",info:"Nincs megadva üzenet."},p={fail:{color:"#E11"},success:{color:"#128023"},wait:{color:"#4390df"},request:{color:"#c29008"},confirm:{color:"#bf5a15"},info:{color:"#16499a"}},g=t(window);t.Dialog={open:e,fail:function(o,n,i,a){t.Dialog.display("fail",o,n,a!==!1?{"Bezárás":{action:function(){t.Dialog.close()}}}:e,i)},success:function(o,n,i,a){t.Dialog.display("success",o,n,i===!0?{"Bezárás":{action:function(){t.Dialog.close()}}}:e,a)},wait:function(e,o,n){"function"==typeof o&&"undefined"===n&&(n=o),("string"!=typeof o||o.length<2)&&(o="Kérés küldése..."),t.Dialog.display("wait",e,o[0].toUpperCase()+o.substring(1),n)},request:function(e,o,n,i,a){"function"==typeof i&&"undefined"==typeof a&&(a=i,i="Elküld");var f={};f[i]={submit:!0,form:n},f["Mégse"]={action:function(){t.Dialog.close()}},t.Dialog.display("request",e,o,f,a)},confirm:function(e,o,n,i){"function"==typeof n&&"undefined"==typeof i&&(i=n),"function"!=typeof i&&(i=new Function),t.isArray(n)||(n=["Igen","Nem"]);var a={};a[n[0]]={action:function(){i(!0)}},a[n[1]]={action:function(){i(!1),t.Dialog.close()}},t.Dialog.display("confirm",e,o,a)},info:function(e,o,n){t.Dialog.display("info",e,o,{"Bezárás":{action:function(){t.Dialog.close()}}},n)},display:function(o,y,h,m,v,w){function b(){t(":focus").length>0?window._focusedElement=t(":focus").last():window._focusedElement=e;var o=t("#dialogContent").find("input,select,textarea").filter(":visible"),n=t("#dialogButtons").children();o.length>0?o.first().focus():n.length>0&&n.first().focus()}function k(l){if(l!==!0){i=n(),a=n(),f=n(),s=n(),r=n(),i.attr("id","dialogOverlay"),f.attr("id","dialogHeader").text(v.title||d[o]),a.attr("id","dialogContent").addClass("input-control");var u=n().html(v.content);"object"==typeof p[o]&&u.css(p[o]),a.append(u),s.attr({id:"dialogBox","class":"metrouicss"}).append(f).append(a),v.buttons&&(r=n().attr({id:"dialogButtons","class":"metrouicss"}).insertAfter(a)),i.appendTo(document.body).css("opacity",.5).show(),s.appendTo(i).css("opacity",0).css({top:g.height()/3,left:(g.width()-s.outerWidth())/2}),setTimeout(function(){s.css({left:(g.width()-s.outerWidth())/2,top:g.height()/2-s.outerHeight()}).animate({top:(g.height()-s.outerHeight())/2,opacity:1},350,b),i.fadeTo(350,1)},100);var y=c.css("overflow");c.attr("data-overflow",y).css("overflow","hidden")}else{i=t("#dialogOverlay"),s=t("#dialogBox"),f=t("#dialogHeader"),a=t("#dialogContent"),r=t("#dialogButtons"),f.text(v.title);var u=n().css({"padding-top":"5px","margin-top":"4px","border-top":"1px solid darkgrey"});"object"==typeof p[o]&&u.css(p[o]),a.append(u.html(v.content)),v.buttons&&0===r.length?r=n().attr({id:"dialogButtons","class":"metrouicss"}).insertAfter(a):v.buttons||0===r.length?r.empty():r.remove(),s.stop().css({left:(g.width()-s.outerWidth())/2,top:(g.height()-s.outerHeight())/2,opacity:1})}f.attr("class","bg-color-"+v.color),v.buttons&&t.each(v.buttons,function(o,n){var i=t(document.createElement("input"));if(i.attr("type","button"),i.attr("class","fg-color-white bg-color-"+v.color),n.form){var f=t("#"+n.form);if(1==f.length){var s=t(document.createElement("button")).hide().appendTo(f);i.on("click",function(){s.trigger("click")})}}i.val(o).on("keydown",function(t){if(-1!==[13,32].indexOf(t.keyCode))t.preventDefault(),t.stopPropagation(),i.trigger("click");else if(9===t.keyCode){t.preventDefault(),t.stopPropagation();var e=r.children(),o=e.filter(":focus"),n=a.find(":input");o.length?t.shiftKey?o.prev().length?o.prev().focus():(n.length>0?n:e).last().focus():o.next().length?o.next().focus():n.add(e).first().focus():n.add(e)[t.shiftKey?"last":"first"]().focus()}}).on("click",function(o){o.preventDefault(),o.stopPropagation(),"function"==typeof n.action&&n.action(o),"close"===n.type&&t.Dialog.close("function"==typeof n.callback?n.callback:e)}),r.append(i)}),setTimeout(function(){s.css({top:(g.height()-s.outerHeight())/2,left:(g.width()-s.outerWidth())/2})},100),v.draggable&&f.css("cursor","move").on({mousedown:function(t){t.preventDefault(),t.stopPropagation();var e=(s.css("z-index"),s.outerHeight()),o=s.outerWidth(),n=s.offset().top+e-t.pageY,a=s.offset().left+o-t.pageX;i.on("mousemove",function(t){var i=t.pageY>0?t.pageY+n-e:0,f=t.pageX>0?t.pageX+a-o:0;i>=0&&i<=window.innerHeight+t.pageY&&s.offset({top:i}),f>=0&&f<=window.innerWidth+t.pageY&&s.offset({left:f})})},click:function(t){t.preventDefault(),t.stopPropagation(),i.off("mousemove")}}),b(),"function"==typeof w&&w()}if("string"!=typeof o||"undefined"==typeof l[o])throw new TypeError("Invalid dialog type: "+typeof o);"function"==typeof m&&"undefined"==typeof v&&"undefined"==typeof w?(w=m,delete m):"object"==typeof m&&"function"==typeof v&&"undefined"==typeof w&&(w=v,delete v),"undefined"==typeof v&&(v={}),"undefined"==typeof y?y=d[o]:y===!1&&(y=e),"undefined"==typeof h&&(h=u[o]),v=t.extend(!0,{type:o,title:y,content:h,buttons:m},l[o],v),"undefined"==typeof t.Dialog.open?(t.Dialog.open=v,k()):k(!!t.Dialog.open)},close:function(e){if("undefined"==typeof t.Dialog.open)return"function"==typeof e?e():!1;t("#dialogOverlay").fadeOut(300,function(){t.Dialog.open=void 0,t(this).remove(),window._focusedElement instanceof jQuery&&window._focusedElement.focus(),"function"==typeof e&&e()}),t("#dialogBox").animate({top:g.height()/2*1.5-s.outerHeight(),opacity:0},290);var o=c.attr("data-overflow");"undefined"!=typeof o&&(c.css("overflow",o),c.removeAttr("data-overflow"))}},g.on("resize",function(){"undefined"!=typeof t.Dialog.open&&(s.css("top",(g.height()-s.outerHeight())/2),s.css("left",(g.width()-s.outerWidth())/2))}).on("ajaxerror",function(){t.Dialog.fail(!1,"A kérés küldése közben hiba történt. További információt a fejlesztői konzolban találsz.")}),t(document.body).on("keydown",function(e){if(9===e.keyCode&&"undefined"!=typeof t.Dialog.open){var o=t(e.target),n=t("#dialogContent :input"),i=o.index("#dialogContent :input");e.shiftKey&&0===i?(e.preventDefault(),t("#dialogButtons :last").focus()):1!==n.filter(":focus").length&&(e.preventDefault(),n.first().focus())}})}(jQuery);
//# sourceMappingURL=dialog_old.min.js.map
