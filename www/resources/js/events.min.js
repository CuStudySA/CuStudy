$(function(){var e,t=!1,a="<button class='typcn typcn-zoom btn js_switchToViewMode'>Visszatérés nézegető módba</button>",i=$(".js_switchToSelectionMode").clone(),n=!0,s=$("<form id='js_form'>	                        <p>Egész napos? <input type='checkbox' name='isFullDay' value='1'>ez az esemény egész napos</p>							<p>Időtartam: <input type='text' name='interval' id='dateRangePicker'></p>							<p>Cím: <input type='text' name='title' placeholder='Esemény címe' required></p>							<p>Rövid leírás: <br><textarea name='description' placeholder='Esemény leírása'></textarea></p>						</form>"),o=function(e){var t="Esemény információinak lekérése";$.Dialog.wait(t),$.ajax({method:"POST",url:"/events/getEventInfos",data:pushToken({id:e.id}),success:function(e){return"string"==typeof e?(console.log(e),$(window).trigger("ajaxerror"),!1):void(e.status?$.Dialog.info(t,e.html):$.Dialog.fail(t,e.message))}})},r={events:"/events/getEvents",header:{left:"prev,next today",center:"title",right:"month,basicWeek,basicDay"},eventLimit:!0,height:530,nextDayThreshold:"00:00:00",timezone:"local",eventClick:function(a){t?($(".selectedEvent").removeClass("selectedEvent"),$(this).addClass("selectedEvent"),e=a,$(".js_edit").attr("disabled",!1),$(".js_delete").attr("disabled",!1)):o(a)}};$("#calendar").fullCalendar(r);var l=function(){$(this).blur(),t=!0,$(".js_switchToSelectionMode").replaceWith(a),$(".js_switchToViewMode").on("click",d)};$(".js_switchToSelectionMode").on("click",l);var d=function(){$(this).blur(),t=!1,$(".js_edit").attr("disabled",!0),$(".js_delete").attr("disabled",!0),e=void 0,$(".selectedEvent").removeClass("selectedEvent"),$(".js_switchToViewMode").replaceWith(i),$(".js_switchToSelectionMode").on("click",l)};$(".js_add").on("click",function(e){e.preventDefault();var t=s.clone(),a="Esemény hozzáadása";$.Dialog.request(a,t.prop("outerHTML"),"js_form","Mentés",function(){$("#dateRangePicker").dateRangePicker({startOfWeek:"monday",separator:" ~ ",format:"YYYY.MM.DD HH:mm",autoClose:!1,time:{enabled:!0}}),$("input[name=isFullDay]").change(function(){$("#dateRangePicker").data("dateRangePicker").destroy(),$("#dateRangePicker").dateRangePicker({startOfWeek:"monday",separator:" ~ ",format:"YYYY.MM.DD. HH:mm",autoClose:!1,time:{enabled:!n}}),n=!n});var e=$("#js_form");e.on("submit",function(t){t.preventDefault(),$.Dialog.wait(a),$.ajax({method:"POST",url:"/events/add",data:e.serializeForm(),success:function(e){if("string"==typeof e)return console.log(e),$(window).trigger("ajaxerror"),!1;if(e.status){var t=$("#calendar");t.fullCalendar("destroy"),t.fullCalendar(r),$.Dialog.close()}else $.Dialog.fail(a,e.message)}})})})}),$(".js_edit").on("click",function(a){a.preventDefault();var o=s.clone(),d="Esemény szerkesztése";"undefined"!=typeof e&&$.ajax({method:"POST",url:"/events/getEventInfos/all",data:pushToken({id:e.id}),success:function(a){return"string"==typeof a?(console.log(a),$(window).trigger("ajaxerror"),!1):a.status?(o.find("input[name=isFullDay]").attr("checked",1==a.isallday),o.find("input[name=interval]").attr("value",a.start+" ~ "+a.end),o.find("input[name=title]").attr("value",a.title),o.find("textarea[name=description]").text(a.description),$.Dialog.request(d,o.prop("outerHTML"),"js_form","Mentés",function(){$("#dateRangePicker").dateRangePicker({startOfWeek:"monday",separator:" ~ ",format:"YYYY.MM.DD HH:mm",autoClose:!1,time:{enabled:!0}}),$("input[name=isFullDay]").change(function(){$("#dateRangePicker").data("dateRangePicker").destroy(),$("#dateRangePicker").dateRangePicker({startOfWeek:"monday",separator:" ~ ",format:"YYYY.MM.DD. HH:mm",autoClose:!1,time:{enabled:!n}}),n=!n});var a=$("#js_form");a.on("submit",function(n){n.preventDefault(),$.Dialog.wait(d);var s=a.serializeForm();s.id=e.id,$.ajax({method:"POST",url:"/events/edit",data:s,success:function(a){if("string"==typeof a)return console.log(a),$(window).trigger("ajaxerror"),!1;if(a.status){var n=$("#calendar");n.fullCalendar("destroy"),n.fullCalendar(r),e=void 0,$(".js_edit").attr("disabled",!0),$(".js_delete").attr("disabled",!0),$(".js_switchToViewMode").replaceWith(i),$(".js_switchToSelectionMode").on("click",l),t=!1,$.Dialog.close()}else $.Dialog.fail(d,a.message)}})})}),void 0):$.Dialog.fail(d,a.message)}})}),$(".js_delete").on("click",function(a){a.preventDefault();var n="Esemény törlése";"undefined"!=typeof e&&$.Dialog.confirm(n,"Arra készülsz, hogy törlöd a kiválasztott eseményt! Folytatod?",["Esemény törlése","Visszalépés"],function(a){a&&($.Dialog.wait(),$.ajax({method:"POST",url:"/events/delete",data:pushToken({id:e.id}),success:function(a){if("string"==typeof a)return console.log(a),$(window).trigger("ajaxerror"),!1;if(a.status){var s=$("#calendar");s.fullCalendar("destroy"),s.fullCalendar(r),e=void 0,$(".js_edit").attr("disabled",!0),$(".js_delete").attr("disabled",!0),$(".js_switchToViewMode").replaceWith(i),$(".js_switchToSelectionMode").on("click",l),t=!1,$.Dialog.close()}else $.Dialog.fail(n,a.message)}}))})})});
//# sourceMappingURL=events.min.js.map
