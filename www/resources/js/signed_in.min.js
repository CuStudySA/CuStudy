$(function(){var e=/(^|#)(?:_(?:=_)?)?$/;e.test(window.location.hash)&&window.history.replaceState({},"",window.location.href.replace(e,"")),$("#sidebar").find(".avatar").children("img").on("error",function(){this.src="/resources/img/user.svg"}),$("#logout").on("click",function(e){e.preventDefault();var t="Kilépés a rendszerből";$.Dialog.confirm(t,"Biztosan ki szeretnél jelentkezni?",["Kijelentkezek","Belépve maradok"],function(e){e&&($.Dialog.wait(t),$.ajax({method:"POST",url:"/logout",data:pushToken({}),success:function(e){return"string"==typeof e?(console.log(e),$(window).trigger("ajaxerror"),!1):void(e.status?($.Dialog.success(t,"Sikeresen kijelentkezett, átirányítjuk..."),window.location.href="/"):$.Dialog.fail(t,"Kijelentkezés nem sikerült, próbálja meg később, vagy törölje a böngésző sütijeit!"))}}))})});var t=!1,a=$('<form id="js_form"><p>Kérem válasszon az elérhető szerepkörök közül:</p></form>');$(".avatar").children(".sessionswitch").on("click",function(e){var r=$('<label style="text-align:left"><input type="radio" name="role" required> <b class="intezmeny"></b>: <span class="szerep"></span></label>'),n="Szerepkör-választás",o=function(){$.Dialog.request(n,a,"js_form","Szerepkör kiválasztása",function(e){e.on("submit",function(t){t.preventDefault();var a=e.serializeForm();$.Dialog.wait(!1,"Módosítások alkalmazása a munkameneten"),$.ajax({method:"POST",url:"/fooldal/roles/set",data:a,success:function(e){return"string"==typeof e?(console.log(e),$(window).trigger("ajaxerror"),!1):e.status?($.Dialog.success(!1,e.message),void setTimeout(function(){window.location.href="/"},1e3)):$.Dialog.fail(!1,e.message)}})})})};t?o():(t=!0,$.Dialog.wait(n,"Az elérhető szerepkörök lekérdezése folyamatban..."),$.ajax({method:"POST",url:"/fooldal/roles/get",data:pushToken({}),success:function(e){return"string"==typeof e?(console.log(e),$(window).trigger("ajaxerror"),!1):e.status?($.each(e.roles,function(e,t){var n=r.clone();n.find("input").attr("value",t.entryId).attr("disabled",1==t.active),n.find(".intezmeny").text(t.intezmeny),n.find(".szerep").text(t.szerep),a.append(n)}),void o()):$.Dialog.fail(!1,"Nem tudtuk lekérdezni az elérhető szerepkörök listáját! A szerepkör-választás nem lehetséges!")}}))})});
//# sourceMappingURL=signed_in.min.js.map
