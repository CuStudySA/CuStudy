$(function(){var e=/(^|#)(?:_(?:=_)?)?$/;e.test(window.location.hash)&&window.history.replaceState({},"",window.location.href.replace(e,"")),$("#sidebar").find(".avatar").children("img").on("error",function(){this.src="/resources/img/user.svg"}),$("#logout").on("click",function(e){e.preventDefault();var t="Kilépés a rendszerből";$.Dialog.confirm(t,"Biztosan ki szeretnél jelentkezni?",["Kijelentkezek","Belépve maradok"],function(e){e&&($.Dialog.wait(t),$.ajax({method:"POST",url:"/logout",data:pushToken({}),success:function(e){return"string"==typeof e?(console.log(e),$(window).trigger("ajaxerror"),!1):void(e.status?($.Dialog.success(t,"Sikeresen kijelentkezett, átirányítjuk..."),window.location.href="/"):$.Dialog.fail(t,"Kijelentkezés nem sikerült, próbálja meg később, vagy törölje a böngésző sütijeit!"))}}))})});var t=!1,r=$('<p>Kérem válasszon az elérhető szerepkörök közül:</p>				<form id="js_form">				</form>');$(".avatar").on("click",function(e){var a=$('<p><input type="radio" name="role"> <b class="intezmeny"></b>: <span class="szerep"></span></p>'),o={},s="Szerepkör-választás";t||(t=!0,$.Dialog.wait(s,"Az elérhető szerepkörök lekérdezése folyamatban..."),$.ajax({method:"POST",url:"/fooldal/roles/get",data:pushToken({}),success:function(e){if("string"==typeof e)return console.log(e),$(window).trigger("ajaxerror"),!1;if(e.status){o=e.roles;var t=0;for(t=0;t<o.length;t++){var i=a.clone(),n=o[t];i.find("input").attr("value",n.entryId),i.find(".intezmeny").text(n.intezmeny),i.find(".szerep").text(n.szerep),n.active&&i.find("input[type=radio]").attr("checked",!0),r.filter("form").append(i)}}else $.Dialog.fail(s,"Nem tudtuk lekérdezni az elérhető szerepkörök listáját! A szerepkör-választás nem lehetséges!")}})),$.Dialog.request(s,r,"js_form","Szerepkör kiválasztása",function(){$("#js_form").on("submit",function(e){e.preventDefault(),$.Dialog.wait(s,"Módosítások alkalmazása a munkameneten..."),$.ajax({method:"POST",url:"/fooldal/roles/set",data:$("#js_form").serializeForm(),success:function(e){return"string"==typeof e?(console.log(e),$(window).trigger("ajaxerror"),!1):void(e.status?($.Dialog.success(s,e.message),setTimeout(function(){window.location.href="/"},1e3)):$.Dialog.fail(s,e.message))}})})})})});
//# sourceMappingURL=signed_in.min.js.map
